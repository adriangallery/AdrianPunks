<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ADRIAN Swap - Exchange ETH for $ADRIAN</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="../adrian1.ico">
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="../market/styles.css">
  <link rel="stylesheet" href="swap-styles.css">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <div class="d-flex align-items-center">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <span class="navbar-text token-symbol ms-2">$ADRIAN</span>
      </div>
      
      <!-- Mobile Wallet Button -->
      <div class="d-flex d-lg-none align-items-center">
        <button id="connectWalletButtonMobile" class="btn">Connect</button>
      </div>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link" href="https://adrianpunks.com">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://adrianpunks.com/swap/">Swap</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://adrianpunks.com/market/">Market</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://adrianpunks.com/punkquest">PunkQuest</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://adrianpunks.com/toggler">Toggler</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://adrianzero.com">AdrianZERO</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://discord.gg/ZtyBkXGtwd" target="_blank">Discord</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://x.com/adriancerda" target="_blank">X</a>
          </li>
        </ul>
      </div>

      <!-- Desktop Wallet Button -->
      <div class="d-none d-lg-flex align-items-center ms-auto desktop-wallet-section">
        <button id="connectWalletButton" class="btn">Connect Wallet</button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-6 col-md-8 col-12">
        
        <!-- Network Warning -->
        <div id="networkWarning" class="alert alert-warning alert-dismissible fade show" role="alert" style="display: none;">
          <strong>‚ö†Ô∏è Wrong Network</strong>
          <p class="mb-2">Please switch to Base Mainnet to use the swap.</p>
          <button id="switchNetworkBtn" class="btn btn-sm btn-dark">Switch to Base</button>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <!-- Swap Card -->
        <div class="swap-card">
          <div class="swap-header">
            <h2>Swap</h2>
            <button id="settingsBtn" class="settings-btn" data-bs-toggle="modal" data-bs-target="#settingsModal">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319z"/>
              </svg>
            </button>
          </div>

          <!-- From Token -->
          <div class="token-input-container">
            <div class="token-input-header">
              <span class="input-label">From</span>
              <span class="balance-label">Balance: <span id="fromBalance">0.0000</span></span>
            </div>
            <div class="token-input-wrapper">
              <input type="text" id="fromAmount" class="token-input" placeholder="0.0" inputmode="decimal" autocomplete="off" autocorrect="off">
              <button id="fromTokenBtn" class="token-select-btn" data-bs-toggle="modal" data-bs-target="#tokenSelectModal">
                <span id="fromTokenSymbol">ETH</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
              </button>
            </div>
            <div class="token-value">~$<span id="fromValueUSD">0.00</span> USD</div>
            <button id="maxBtn" class="max-btn">MAX</button>
          </div>

          <!-- Swap Direction Button -->
          <div class="swap-direction-container">
            <button id="swapDirectionBtn" class="swap-direction-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>
              </svg>
            </button>
          </div>

          <!-- To Token -->
          <div class="token-input-container">
            <div class="token-input-header">
              <span class="input-label">To</span>
              <span class="balance-label">Balance: <span id="toBalance">0.0000</span></span>
            </div>
            <div class="token-input-wrapper">
              <input type="text" id="toAmount" class="token-input" placeholder="0.0" inputmode="decimal" autocomplete="off" autocorrect="off" readonly>
              <button id="toTokenBtn" class="token-select-btn" data-bs-toggle="modal" data-bs-target="#tokenSelectModal">
                <span id="toTokenSymbol">ADRIAN</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
              </button>
            </div>
            <div class="token-value">~$<span id="toValueUSD">0.00</span> USD</div>
          </div>

          <!-- Transaction Details -->
          <div id="transactionDetails" class="transaction-details" style="display: none;">
            <div class="detail-row">
              <span>Rate</span>
              <span id="exchangeRate">1 ETH = 0 ADRIAN</span>
            </div>
            <div class="detail-row">
              <span>Tax (10%)</span>
              <span id="taxAmount">~0 ADRIAN</span>
            </div>
            <div class="detail-row">
              <span>Price Impact</span>
              <span id="priceImpact" class="price-impact-low">< 0.01%</span>
            </div>
            <div class="detail-row">
              <span>Minimum Received</span>
              <span id="minimumReceived">0 ADRIAN</span>
            </div>
          </div>

          <!-- Approve/Swap Button -->
          <div id="approveSection" style="display: none;">
            <button id="approveBtn" class="swap-btn approve-btn">
              <span>Approve ADRIAN</span>
            </button>
            <p class="approve-text">You must approve ADRIAN before swapping</p>
          </div>

          <button id="swapBtn" class="swap-btn" disabled>
            <span id="swapBtnText">Connect Wallet</span>
          </button>

          <!-- Loading State -->
          <div id="loadingState" class="loading-state" style="display: none;">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
            <span id="loadingText">Processing transaction...</span>
          </div>
        </div>

        <!-- Info Card -->
        <div class="info-card mt-4">
          <h5>‚ÑπÔ∏è Important Information</h5>
          <ul>
            <li>This swap uses Uniswap V4 on Base Mainnet</li>
            <li>A <strong>10% tax</strong> is automatically applied on each transaction</li>
            <li>Tax is distributed between FloorEngine (9.8%), Treasury (0.1%) and TaxReaper (0.1%)</li>
            <li>Prices include the tax impact</li>
            <li>Make sure you have enough ETH for gas fees</li>
          </ul>
        </div>

        <!-- Recent Transactions -->
        <div class="recent-transactions mt-4" id="recentTransactions" style="display: none;">
          <h5>üìä Recent Transactions</h5>
          <div id="transactionsList" class="transactions-list"></div>
        </div>

      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="settingsModalLabel">Swap Settings</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="slippageInput" class="form-label">Slippage Tolerance (%)</label>
            <div class="slippage-options">
              <button class="slippage-preset-btn" data-slippage="0.5">0.5%</button>
              <button class="slippage-preset-btn active" data-slippage="1">1%</button>
              <button class="slippage-preset-btn" data-slippage="2">2%</button>
              <button class="slippage-preset-btn" data-slippage="5">5%</button>
            </div>
            <input type="number" class="form-control mt-2" id="slippageInput" placeholder="Custom" min="0.1" max="50" step="0.1" value="1">
            <small class="text-muted">Slippage is additional to the 10% tax</small>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Transaction Deadline</label>
            <div class="input-group">
              <input type="number" class="form-control" id="deadlineInput" value="20" min="1" max="60">
              <span class="input-group-text">minutes</span>
            </div>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="unlimitedApprovalCheck">
            <label class="form-check-label" for="unlimitedApprovalCheck">
              Unlimited Approvals
            </label>
            <small class="text-muted d-block mt-1">
              Approve maximum amount to avoid re-approving for each swap. Less secure but more convenient.
            </small>
          </div>

          <div class="form-check mt-3">
            <input class="form-check-input" type="checkbox" id="expertModeCheck">
            <label class="form-check-label" for="expertModeCheck">
              Expert Mode (no confirmations)
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Token Select Modal -->
  <div class="modal fade" id="tokenSelectModal" tabindex="-1" aria-labelledby="tokenSelectModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="tokenSelectModalLabel">Select Token</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="token-list">
            <div class="token-list-item" data-token="ETH">
              <div class="token-list-icon-placeholder">
                <span class="token-symbol-large">Œû</span>
              </div>
              <div class="token-list-info">
                <div class="token-list-name">Ethereum</div>
                <div class="token-list-symbol">ETH</div>
              </div>
            </div>
            <div class="token-list-item" data-token="ADRIAN">
              <div class="token-list-icon-placeholder">
                <span class="token-symbol-large">A</span>
              </div>
              <div class="token-list-info">
                <div class="token-list-name">Adrian Token</div>
                <div class="token-list-symbol">ADRIAN</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Notifications -->
  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <strong class="me-auto" id="toastTitle">Notification</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body" id="toastBody">
        Message
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Ethers.js -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.7.0/dist/ethers.umd.min.js"></script>
  
  <!-- ABIs -->
  <script src="abis/erc20.js"></script>
  <script src="abis/swapper.js"></script>
  
  <!-- App Modules -->
  <script src="config.js"></script>
  <script src="network.js"></script>
  <script src="wallet.js"></script>
  <script src="quotes.js"></script>
  <script src="swap.js"></script>
  <script src="app.js"></script>
</body>
</html>

